(()=>{"use strict";const t=document.querySelector("#board-1"),e=document.querySelector("#board-2"),r=(r,s)=>{t.innerHTML="",e.innerHTML="",[{board:r,element:t},{board:s,element:e}].forEach((({board:t,element:e})=>{const s=[];for(let e=0;e<t[0].length;e++){const r=[];for(let s=0;s<t.length;s++)r.push(t[s][e]);s.push(r)}s.forEach(((s,a)=>{const i=document.createElement("div");i.classList.add("board-column"),e.appendChild(i),s.forEach(((e,s)=>{const o=document.createElement("div");o.classList.add("grid"),o.dataset.y=`${a}`,o.dataset.x=`${s}`,i.appendChild(o),Number.isInteger(e)||t!=r||o.classList.add("ship"),1==e&&o.classList.add("missed"),"x"===e&&o.classList.add("hit")}))}))})),console.log(r,s)};class s{constructor(t,e){this.id=t,this.length=e,this.hits=0,this.status=!1}hit(){this.hits+=1}isSunk(){let t=this.hits>=this.length;return!0===t&&(this.status=!0),t}}class a{constructor(){this.board=Array(10).fill(0).map((()=>Array(10).fill(0))),this.ships=[]}isCellEmpty(t,e){return 0===this.board[t][e]}placeShip(t,e,r,a){if("vertical"===a){if(t+r>this.board.length)return!1;if(e+r>this.board[0].length)return!1}for(let s=0;s<r;s++)if("vertical"===a){if(!this.isCellEmpty(t+s,e))return!1;if(!this.isCellEmpty(t,e+s))return!1}const i=new s(`ship_${t}_${e}`,r);for(let s=0;s<r;s++)"vertical"===a?this.board[t+s][e]=i:this.board[t][e+s]=i;return this.ships.push(i),this.board}placeShipRandomly(){const t=[5,4,3,3,2];for(let e=0;e<t.length;e++){let r=!1;for(;!r;){let s=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());r=this.placeShip(s,a,t[e],"vertical")}}return this.board}recieveAttack(t,e){const r=this.board[t][e];return r instanceof s?(r.hit(),this.board[t][e]=[{...this.board[t][e]},{hitMarker:"x"}],r.isSunk(),!0):(this.board[t][e]=1,!1)}areAllSunk(){return this.ships.every((t=>t.isSunk()))}}class i{constructor(t){this.name=t}attackShip(t,e,r){return r.recieveAttack(t,e),r.board}attackRandomly(t){let e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());return t.recieveAttack(e,r),t.board}}const o=document.querySelector(".start-btn");o.addEventListener("click",(()=>{(()=>{const t=new i("Player 1"),e=(new i("Computer"),new a),s=new a;e.placeShipRandomly(),s.placeShipRandomly(),r(e.board,s.board);let o=t,n=s;document.addEventListener("click",(t=>{t.target.closest(".grid")&&l(t.target.dataset)}));const l=t=>{let e,r,s=0;for(const a in t)0===s?(r=t[a],s++,console.log(t[a[0]])):1===s&&(e=t[a],s++);c(e,r)},c=(t,a)=>{console.log(t,a),o.attackShip(t,a,n),r(e.board,s.board)}})(),o.disabled=!0}))})();