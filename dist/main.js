(()=>{"use strict";const t=document.querySelector("#board-1"),e=document.querySelector("#board-2");class r{constructor(t,e){this.id=t,this.length=e,this.hits=0,this.status=!1}hit(){this.hits+=1}isSunk(){return this.hits>=this.length}}class s{constructor(){this.board=Array(10).fill(0).map((()=>Array(10).fill(0))),this.ships=[]}isCellEmpty(t,e){return 0===this.board[t][e]}placeShip(t,e,s,a){if("vertical"===a){if(t+s>this.board.length)return!1;if(e+s>this.board[0].length)return!1}for(let r=0;r<s;r++)if("vertical"===a){if(!this.isCellEmpty(t+r,e))return!1;if(!this.isCellEmpty(t,e+r))return!1}const i=new r(`ship_${t}_${e}`,s);for(let r=0;r<s;r++)"vertical"===a?this.board[t+r][e]=i:this.board[t][e+r]=i;return this.ships.push(i),this.board}placeShipRandomly(){const t=[5,4,3,3,2];for(let e=0;e<t.length;e++){let r=!1;for(;!r;){let s=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());r=this.placeShip(s,a,t[e],"vertical")}}return this.board}recieveAttack(t,e){const s=this.board[t][e];return s instanceof r?(s.hit(),!0):(this.board[t][e]=1,!1)}areAllSunk(){return this.ships.every((t=>t.isSunk()))}}class a{constructor(t){this.name=t}attackShip(t,e,r){return r.recieveAttack(t,e),r.board}attackRandomly(t){let e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());return t.recieveAttack(e,r),t.board}}const i=()=>{new a("Player 1"),new a("Computer");const r=new s,i=new s;var o,n;r.placeShipRandomly(),i.placeShipRandomly(),o=r.board,n=i.board,t.innerHTML="",e.innerHTML="",[{board:o,element:t},{board:n,element:e}].forEach((({board:t,element:e})=>{const r=[];for(let e=0;e<t[0].length;e++){const s=[];for(let r=0;r<t.length;r++)s.push(t[r][e]);r.push(s)}r.forEach(((r,s)=>{const a=document.createElement("div");a.classList.add("board-column"),e.appendChild(a),r.forEach(((e,r)=>{const i=document.createElement("div");i.classList.add("grid"),i.dataset.y=`${s}`,i.dataset.x=`${r}`,a.appendChild(i),Number.isInteger(e)||t!=o||i.classList.add("ship"),1==e&&i.classList.add("missed")}))}))})),console.log(o,n),document.addEventListener("click",(t=>{t.target.closest(".grid")&&l(t.target.dataset)}));const l=t=>{let e=0;for(const r in t)0===e?(t[r],e++,console.log(t[r[0]])):1===e&&(t[r],e++)}},o=document.querySelector(".start-btn");o.addEventListener("click",(()=>{i(),o.disabled=!0}))})();